<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>로그인 페이지</title>

  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;700&display=swap" rel="stylesheet">

  <link rel="stylesheet" href="/css/login.css" th:href="@{/css/login.css}">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
</head>
<body>
  <div class="login-container">
    <!-- 다크모드 토글 -->
    <div style="position: absolute; top: 20px; right: 20px;">
      <button class="theme-toggle" id="theme-toggle" title="다크모드 전환">
        <div class="theme-toggle-slider">🌙</div>
      </button>
    </div>
    
    <header class="header-section">
      <!-- 2233076 13주차 추가: 로고 이미지로 변경 및 클릭 시 홈으로 이동 -->
      <a href="/" class="logo-link">
        <img src="/img/logo.png" alt="Job Record" class="logo-img">
      </a>
      <h2>계정에 로그인</h2>
      <p>Enter Your E-Mail & password</p>
    </header>

    <form class="login-form">
      <div class="input-group">
        <label for="email">*E-Mail</label>
        <div class="input-wrapper">
          <i class="fa-regular fa-user"></i>
          <input type="email" id="email" name="email">
        </div>
      </div>

      <div class="input-group">
        <label for="password">*Password</label>
        <!-- 2233076 13주차 추가: 비밀번호 표시/숨김 토글 버튼 -->
        <div class="input-wrapper password-wrapper">
          <i class="fa-solid fa-lock"></i>
          <input type="password" id="password" name="password">
          <button type="button" class="password-toggle" aria-label="비밀번호 표시">
            <i class="fa-regular fa-eye"></i>
          </button>
        </div>
        <!-- 2233076 13주차 추가: Caps Lock 경고 메시지 -->
        <p class="caps-lock-warning" style="display: none;">
          <i class="fa-solid fa-triangle-exclamation"></i> Caps Lock이 켜져 있습니다
        </p>
      </div>

      <button type="submit" class="login-button" disabled>Log-in</button>
      <!-- 로그인 실패/에러 메시지 표시 영역 -->
      <p id="login-error" class="error-text" aria-live="polite"></p>
    </form>

    <!-- SNS Log-in 문구 삭제됨 -->

    <div class="links-section">
      <p>계정이 없으신가요? <a href="/auth/signup">회원가입하기</a></p>
      <p><a href="#" id="reset-password-link">비밀번호를 잊으셨나요?</a></p>
    </div>

    <p class="terms-section">
      '로그인'을 클릭하면 당사의 이용약관 및 개인정보처리방침에<br>
      동의하는 것으로 간주됩니다.
    </p>
  </div>

  <div id="reset-modal" class="reset-modal-overlay">
    <div class="reset-modal">
      <div class="reset-modal-header">
        <h3>비밀번호 찾기</h3>
        <button type="button" id="reset-modal-close" class="reset-modal-close">&times;</button>
      </div>

      <div class="reset-modal-body">
        <!-- 1단계: 인증번호 발송 -->
        <div id="form-request" class="reset-section">
          <h4>1. 인증번호 발송</h4>
          <label for="req-email">이메일:</label>
          <input type="email" id="req-email" class="reset-input" placeholder="가입한 이메일 입력" required>
          <p id="reset-email-error" class="error-text" aria-live="polite"></p>

          <button
            type="button"
            id="request-code-button"
            class="reset-button small">
            인증번호 받기
          </button>
        </div>

        <hr class="reset-divider">

        <!-- 2단계: 비밀번호 재설정 -->
        <form id="form-confirm" class="reset-section" style="display:none;">
          <h4>2. 비밀번호 재설정</h4>

          <!-- 인증번호 행 -->
          <div class="reset-code-row">
            <label for="conf-code">인증번호:</label>
            <input
              type="text"
              id="conf-code"
              class="reset-input"
              placeholder="이메일로 받은 6자리"
              maxlength="6"
              required>
          </div>

          <!-- 인증번호 확인 버튼 -->
          <div class="reset-code-actions">
            <button
              type="button"
              id="resend-code-button"
              class="reset-button small"
              disabled>
              인증번호 재발급
            </button>
            <button
              type="button"
              id="verify-code-button"
              class="reset-button small"
              disabled>
              인증번호 확인
            </button>
          </div>

          <p id="code-message" class="error-text" aria-live="polite"></p>

          <!-- 새 비밀번호 행 -->
          <div class="reset-code-row">
            <label for="conf-password">새 비밀번호:</label>
            <input
              type="password"
              id="conf-password"
              class="reset-input"
              placeholder="8자리 이상, 특수문자 1개 이상"
              required>
          </div>
          <!-- 새 비밀번호 에러 메시지 영역 -->
          <p id="conf-password-error" class="error-text" aria-live="polite"></p>

          <!-- 비밀번호 재설정 버튼 -->
          <div class="reset-code-actions">
            <button
              type="submit"
              id="confirm-reset-password-button"
              class="reset-button small"
              disabled>
              비밀번호 재설정
            </button>
          </div>
        </form>

        <!-- 여기 한 줄만 사용: 파란 글씨 + 타이머 같이 표시 -->
        <div id="message" class="error-text" aria-live="polite"></div>
      </div>
    </div>
  </div>

  <script src="/js/env.js"></script>
  <script src="/js/theme-toggle.js"></script>
  <script src="/js/password-reset.js"></script>
  <script src="/js/login.js"></script>
</body>
</html>
